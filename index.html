<!DOCTYPE html>
<html lang="en">
  <head>
    <title>lico 16 player</title>
    <script src="./scripts/main.ts"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Pixelify+Sans:wght@400..700&display=swap"
      rel="stylesheet"
    />
    <style>
      :root {
        --def-hue: 0;
      }

      body {
        background-color: hsl(var(--def-hue), 5%, 10%);
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        width: 100vw;
        height: 100vh;
        padding: 0;
        margin: 0;
        font-family: "Pixelify Sans", monospace;
      }

      canvas {
        background-color: black;
      }

      #outline {
        background-color: hsl(var(--def-hue), 25%, 50%);
        padding: 10px;
        padding-bottom: 6px;
        border-bottom: 10px solid hsl(var(--def-hue), 35%, 40%);
        height: min-content;
      }

      #inline {
        background-color: hsl(var(--def-hue), 35%, 40%);
        padding-top: 5px;
      }

      #overlay {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: hsla(0, 0, 0, 0.5);
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 20;

        cursor: pointer;
      }

      #overlay > div {
        width: 30px;
        height: 42px;
        scale: 1.2;

        display: grid;
        grid-template-columns: repeat(5, 1fr);
        animation: play-button-rotate 2500ms step-end infinite;
      }

      #overlay > div:hover > div {
        box-shadow: 0 0 10px #fff3, 0 0 20px #fff3, 0 0 30px #fff3,
          0 0 40px #fff3;
      }

      @keyframes play-button-rotate {
        from {
          transform: translateY(0);
        }
        20% {
          transform: translateY(2px);
        }
        40% {
          transform: translateY(4px);
        }
        60% {
          transform: translateY(2px);
        }
        80% {
          transform: translateY(0);
        }
      }

      #overlay > div > div {
        width: 100%;
        height: 100%;

        background-color: white;
        transition: box-shadow 250ms;
      }

      #overlay > div > span {
        width: 100%;
        height: 100%;

        background-color: transparent;
      }

      h1 {
        display: flex;
        gap: 10px;
        color: white;
        font-size: 24px;
        text-align: center;
        padding: 40px;
        font-weight: normal;
      }

      h1 > span {
        font-weight: bold;
      }

      .cart-logo {
        height: 24px;
        width: 24px;
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        animation: cart-logo-ping 3s step-end infinite;
      }

      @keyframes cart-logo-ping {
        from {
          transform: translateY(5px);
        }

        15% {
          transform: translateY(0);
        }

        30% {
          transform: translateY(-5px);
        }

        45% {
          transform: translateY(0);
        }

        60% {
          opacity: 0.5;
        }
      }

      .cart-logo * {
        height: 6px;
        width: 6px;
      }

      .cart-logo div {
        background-color: white;
      }

      #no-cartridge-warning-bg {
        position: absolute;
        background-color: hsla(0, 0%, 0%, 0.5);
        backdrop-filter: blur(5px);
        width: 100vw;
        height: 100vh;
        top: 0;
        left: 0;
        z-index: 39;
      }

      #no-cartridge-warning {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background-color: hsl(var(--def-hue), 5%, 20%);
        border-bottom: 10px solid hsl(var(--def-hue), 5%, 10%);
        padding: 20px;
        z-index: 40;
      }

      #no-cartridge-warning button {
        background-color: hsl(var(--def-hue), 75%, 30%);
        border: none;
        width: 50px;
        height: 50px;
        border-radius: 100%;
        box-shadow: 0 5px 0 0 hsl(var(--def-hue), 75%, 20%);
        position: relative;
      }

      #no-cartridge-warning button::after {
        content: "-";
        color: hsl(var(--def-hue), 50%, 80%);
        font-size: 40px;
        position: absolute;
        right: 5px;
        top: 50%;
        transform: translateY(-50%);
      }

      #no-cartridge-warning button:active {
        rotate: 90deg;
      }

      /* #nogame,
        #loadcart {
          width: 50%;
        } */

      #nogame-container {
        display: grid;
        gap: 20px;
      }

      #memory {
        background-color: hsl(var(--def-hue), 25%, 50%);
        border-bottom: 5px solid hsl(var(--def-hue), 35%, 40%);
        height: 15px;
        margin: 5px;
        width: 140px;
        position: absolute;
        top: 10px;
        right: 10px;
        padding: 5px;
        padding-bottom: 15px;
      }

      #memory > div {
        background-color: hsl(var(--def-hue), 100%, 50%);
        border-bottom: 5px solid hsl(var(--def-hue), 100%, 40%);
        box-shadow: 0 5px 0 0 hsl(var(--def-hue), 35%, 40%); /* second border */
        height: 100%;
        width: 0%;
      }

      #storage {
        background-color: hsl(var(--def-hue), 25%, 50%);
        border-bottom: 5px solid hsl(var(--def-hue), 35%, 40%);
        height: 15px;
        margin: 5px;
        width: 140px;
        position: absolute;
        top: 60px;
        right: 10px;
        padding: 5px;
        padding-bottom: 15px;
      }

      #storage > div {
        background-color: hsl(var(--def-hue), 100%, 50%);
        border-bottom: 5px solid hsl(var(--def-hue), 100%, 40%);
        box-shadow: 0 5px 0 0 hsl(var(--def-hue), 35%, 40%); /* second border */
        height: 100%;
        width: 0%;
      }

      #file-picker {
        position: absolute;
        top: 25px;
        left: 10px;
        z-index: 20;
      }

      #file-input {
        display: none;
      }

      .pop-button {
        position: relative;
        width: fit-content;
        cursor: pointer;
        user-select: none;
      }

      .pop-base {
        height: 100%;
        background-color: hsl(var(--def-hue), 75%, 20%);
        border-radius: 0;
        width: 100%;
        position: absolute;
        bottom: 0;
        left: 0;
        z-index: 1;
      }

      .pop-top {
        background-color: hsl(var(--def-hue), 75%, 30%);
        color: white;
        padding: 10px 20px;
        font-size: medium;
        border-radius: 0;
        position: relative;
        z-index: 2;
        top: -7px;
        transition: top 1s
          linear(
            0,
            0.01 0.5%,
            0.046 1.1%,
            0.184 2.3%,
            0.925 6.4%,
            1.164 8%,
            1.316 9.6%,
            1.357 10.4%,
            1.375 11.2%,
            1.375 11.8%,
            1.364 12.4%,
            1.312 13.7%,
            1.028 17.9%,
            0.934 19.6%,
            0.881 21.1%,
            0.859 22.6%,
            0.862 23.8%,
            0.881 25.1%,
            1.025 31.1%,
            1.045 32.6%,
            1.053 34.1%,
            1.045 36.6%,
            0.991 42.6%,
            0.98 45.5%,
            1.007 56.9%,
            0.997 68.3%,
            1
          );
      }

      .pop-button:hover .pop-top {
        top: -12px;
      }

      .pop-button:active .pop-top {
        top: 0;
        transition: top 100ms ease-in-out;
      }
    </style>
  </head>

  <body>
    <div id="memory">
      <div></div>
    </div>
    <div id="storage">
      <div></div>
    </div>
    <div id="overlay">
      <div>
        <div></div>
        <span></span>
        <span></span>
        <span></span>
        <span></span>

        <div></div>
        <div></div>
        <span></span>
        <span></span>
        <span></span>

        <div></div>
        <div></div>
        <div></div>
        <span></span>
        <span></span>

        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <span></span>

        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>

        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <span></span>

        <div></div>
        <div></div>
        <div></div>
        <span></span>
        <span></span>

        <div></div>
        <div></div>
        <span></span>
        <span></span>
        <span></span>

        <div></div>
        <span></span>
        <span></span>
        <span></span>
        <span></span>
      </div>
    </div>
    <div id="outline">
      <div id="inline"></div>
      <canvas id="canvas"></canvas>
    </div>
    <div id="file-picker">
      <div class="pop-button">
        <div class="pop-base"></div>
        <div class="pop-top" id="file-btn">Load Cartridge</div>
      </div>

      <input
        id="file-input"
        type="file"
        accept=".json, .jsonc, .lua"
        multiple
      />
    </div>
  </body>
</html>
